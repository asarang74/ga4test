<!DOCTYPE html>
<html>
<head>
<title>GA4 demo website - dynamic load</title>
  
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PVVZTQXFR6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PVVZTQXFR6');
</script>
  
</head>
<body>
  Test GA4 site dynamic 2
  <br/><br/>
  <button id="btnEstimate" onclick="gtag('event','estimate')">Online estimate</button>
  <br/><br/>
  <button id="btnBookAppt" onclick="gtag('event','book-appointment')">Book appointment</button>
  
<!-- Google tag (gtag.js) in body -->
<script>
  
  // Dynamic loading of gtag
  if (!window.gtag) {
    console.log("dynamic loading of gtag");
    const gaScript = document.createElement("script");
    gaScript.type = "text/javascript";
    gaScript.setAttribute("async", "true");
    gaScript.setAttribute("src", "https://www.googletagmanager.com/gtag/js?id=G-PVVZTQXFR6");
    document.documentElement.firstChild.appendChild(gaScript);
  
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-PVVZTQXFR6');
  } else {
    console.log("gtag already exists");
  }
    
</script>  
  
</body>
</html>
